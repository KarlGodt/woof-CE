#!/bin/sh

ME_PROG=`readlink -f "$0"`
ME_DIR=${ME_PROG%/*}
cd "$ME_DIR"

cd "$ME_DIR"/KarlGodt_ForkWoof.Push.d/woof-code/rootfs-skeleton || exit

FIND=`find . |sort`

while read found
do


found="${found#*/}"
#echo "$found"
[ "$found" ] || continue
[ -d "$found" ] && continue
[ "${found##*/}" = '.gitignore' ] && continue
[ "${found##*/}" = 'EMPTYDIRMARKER' ] && continue
test "`echo "$found" | grep -iE '\.gz$|\.png$|\.xpm$|\.wav$|\.au$'`" && continue
[ -e /"$found" ] || { mkdir -p /"${found%/*}"; cp -a ./"$found" /"$found"; continue; }

[ -L ./"$found" ] && { realpath ./"$found" || continue; }

#SAME=-s
diff -q $SAME ./"$found" /"$found" && continue # 0 is equal, 1 is different
#echo "./$found and /$found differ"
test -L ./"$found" && continue

cd "$ME_DIR"/KarlGodt_ForkWoof.Push.d || exit
cp -a /"$found" "$ME_DIR"/KarlGodt_ForkWoof.Push.d/woof-code/rootfs-skeleton/"$found" || { cd "$ME_DIR"/KarlGodt_ForkWoof.Push.d/woof-code/rootfs-skeleton; continue; }
git add woof-code/rootfs-skeleton/"$found" || { cd "$ME_DIR"/KarlGodt_ForkWoof.Push.d/woof-code/rootfs-skeleton; continue; }
git commit -m "${found##*/} : Bulk Maintanance Replacement of today."

cd "$ME_DIR"/KarlGodt_ForkWoof.Push.d/woof-code/rootfs-skeleton
sleep 1


done<<EOI
`echo "$FIND"`
EOI

