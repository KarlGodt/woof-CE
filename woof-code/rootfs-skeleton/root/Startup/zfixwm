#!/bin/ash
#restore /usr/bin/restartwm
#see /usr/sbin/wmswitcher
#not urgent so we give it "z" prefix, more of a precaution

# rpl works like sed 's/X/Y/' filename
# and would replace all occurences
# that contains string
# since string NEXTWM= occurs twice
#     as NEXTWM="$1"
# and as  NEXTWM=${NEXTWM:-"$PREVIOUSWM"}
# can not use rpl
exit 0

#cp -f /usr/bin/.restartwm.bak /usr/bin/restartwm
FUTUREWM=`grep -we '^NEXTWM=' /usr/bin/restartwm`

case $FUTUREWM in
*='"$1"') exit 0;;
esac

#echo "rpl -v '$FUTUREWM' 'NEXTWM=\"\$1\"' /usr/bin/restartwm" >/tmp/wmrestore
echo 'rpl -v '"'$FUTUREWM' ""'"'NEXTWM="$1"'"'"' /usr/bin/restartwm' >/tmp/wmrestore
    . /tmp/wmrestore
    test $? = 0 && rm $VERB -f /tmp/wmrestore
