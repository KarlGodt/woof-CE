#! /bin/bash

  _TITLE_=Markup
_VERSION_=1.0omega
_COMMENT_="GTKdialog to play with HTML markup"

MY_SELF="$0"
MY_PID=$$

test -f /etc/rc.d/f4puppy5 && {
[ "$HAVE_F4PUPPY5" ] || . /etc/rc.d/f4puppy5

ADD_PARAMETER_LIST=""
ADD_PARAMETERS=""
_provide_basic_parameters

TWO_HELP=''; TWO_VERSION=''; TWO_VERBOSE=''; TWO_DEBUG=''; ## Set to anything if code requires further down (ie. custom usage or version message)
ADD_HELP_MSG="$_COMMENT_"
_parse_basic_parameters "$@"
[ "$DO_SHIFT" ] && [ ! "${DO_SHIFT//[[:digit:]]/}" ] && {
  for oneSHIFT in `seq 1 1 $DO_SHIFT`; do shift; done; }

_trap
}

[ -s /tmp/mytags ] || echo '
"i"         <i>Italic</i>
"b"        <b>Bold</b>
"big"     <big>Large</big>
"u"         <u>underlined</u>
"sup"     <sup>Supercript</sup>
"s"         <s>strikethrough</s>
"small"   <small>small</small>
"sub"     <sub>Subscript</sub>
"tt"         <tt>Monospace</tt>
"span"   <span color="blue">colour</span>' > /tmp/mytags

export MAIN_DIALOG='<window window_position="1" title="Text tags">
<vbox>

<hbox>
<frame Tags>
<text use-markup="true"><input>echo "$(cat /tmp/mytags)"</input></text>
  </frame>

<frame Example>

<text use-markup="true">
<label>"
<span color='"'red'"' font-family='"'purisa'"' weight='"'bold'"' size='"'x-large'"'>
<big>What Great Text ! </big></span>
"</label></text>

<text width_request="600" selectable="true">
<label>Tag: "span" attributes: color="red" font-family="arial" weight="bold" size="x-large"</label></text>

<text width_request="600" use-markup="true">
<label>"
<i>When using a span tag within a script, double quotes should
be protected by apostrophes.
  No separate text file needed!
The color can be indicated in hexadecimal form or
by the name of the color.</i>"</label></text>

 </frame>
</hbox>

<text width_request="800" selectable="true"><label>"<i>  </i>   <b>  </b>   <u>  </u>   <s>  </s>  <small>  </small>  <big>  </big>   <tt>  </tt>   <sup>  </sup>   <sub>  </sub>  <span>  </span>"</label></text>

<hbox>
  <frame Edit pane>
    <edit>
    <input file>/tmp/tag_editor.txt</input>
      <variable>EDITOR</variable>
      <width>350</width><height>250</height>
    </edit>
    </frame>

    <frame Results pane>
    <text use-markup="true" height_request="250" width_request="350" selectable="true"><variable>RETOUR</variable><input>echo "$(cat /tmp/tag_editor.txt)"</input></text>
  </frame>
</hbox>

<hbox>
<button cancel>

    <action>rm -f /tmp/mytags</action>
    <action>rm -f /tmp/tag_editor.txt</action>
    <action type="exit">close</action>
     </button>
<button><input file icon="gtk-save"></input>
    <label> Save file </label>
    <action>cp -f /tmp/tag_editor.txt $HOME</action>
   </button>
<button><input file icon="gtk-refresh"></input>
    <label> Show result </label>
    <action>echo "$EDITOR" > /tmp/tag_editor.txt</action>
    <action type="exit">refresh</action>
    </button>
    </hbox>
</vbox>
</window>'
EXIT="refresh"
while [ "$EXIT" = "refresh" ]
do
GUI=$(gtkdialog3 --program=MAIN_DIALOG)
eval $(grep EXIT <<< "$GUI")
[ -z "$GUI" ] && exit
done

exit
# Very End of this file 'usr/sbin/markup' #
###END###
