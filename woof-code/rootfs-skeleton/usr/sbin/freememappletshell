#!/bin/sh
#executed from ~/.xinitrc

_TITLE_=freememappletwrapper
_COMMENT_="CLI to start freememapplet(s) in taskbar."

MY_SELF="$0"

test -f /etc/rc.d/f4puppy5 && {
 set +e
 source /etc/rc.d/f4puppy5 && {
 set +n
 source /etc/rc.d/f4puppy5; } || echo "WARNING : Could not source /etc/rc.d/f4puyppy5 ."

ADD_PARAMETER_LIST=
ADD_PARAMETERS=
_provide_basic_parameters

ADD_HELP_MSG="$_COMMENT_"
_parse_basic_parameters "$@"
[ "$DO_SHIFT" ] && [ ! "${DO_SHIFT//[[:digit:]]/}" ] && {
for i in `seq 1 1 $DO_SHIFT`; do shift; done; }

_trap
} || echo "Warning : No /etc/rc.d/f4puppy5 installed."


ERR=/dev/null

. /etc/rc.d/PUPSTATE

echo "PUPMODE=$PUPMODE'"

#note, could also have -u <delay> for update time...
for p in `echo -e "${PATH//:/\n}"` ; do
 FREEMEMAPPLETS="$FREEMEMAPPLETS
 `ls -1F ${p}/freememapplet* 2>$ERR |grep '\*$' |tr -d '\*'`"
done

FREEMEMAPPLETS=`echo "$FREEMEMAPPLETS" | grep -v "${0##*/}"`

for app in $FREEMEMAPPLETS ; do
echo "'${0}' : '$app'"
pidof $app || $app -p $PUPMODE &
echo
sleep 1
done

#exec freememapplet -p $PUPMODE
