#!/bin/bash
#
# New header by Karl Reimer Godt, September 2014
  _TITLE_="Puppy_keyboard"
_VERSION_=1.0omega
_COMMENT_="$_TITLE_:Puppy Linux shell script [to TODO here]"

MY_SELF="/usr/local/jwmconfig3/keyboard"
MY_PID=$$

test -f /etc/rc.d/f4puppy5 && {
source /etc/rc.d/f4puppy5

ADD_PARAMETER_LIST=""
ADD_PARAMETERS=""
_provide_basic_parameters

ADD_HELP_MSG="$_COMMENT_"
_parse_basic_parameters "$@"
[ "$DO_SHIFT" ] && [ ! "${DO_SHIFT//[[:digit:]]/}" ] && {
  for oneSHIFT in `seq 1 1 $DO_SHIFT`; do shift; done; }

_trap

}
# End new header
#


########################################################################
#
#
#
#
#
# /dev/hda8:
# LABEL="MacPup431_O2"
# UUID="6d9a8e91-c301-4ff8-9875-97ec708cbee8"
# TYPE="ext3"
# DISTRO_NAME='Puppy'
# DISTRO_VERSION=431
# DISTRO_BINARY_COMPAT='puppy'
# DISTRO_FILE_PREFIX='pup'
# DISTRO_COMPAT_VERSION='4'
# PUPMODE=2
# KERNVER=2.6.37.4-KRG-i486-StagingDrivers-2
# PUP_HOME='/'
# SATADRIVES='·'
# USBDRIVES='·sda·'
# Linux·puppypc·2.6.37.4-KRG-i486-StagingDrivers-2·#4·SMP·Thu·Mar·17·06:05:58·GMT-8·2011·i686·GNU/Linux
# X·Window·System·Version·1.3.0
# Release·Date:·19·April·2007
# X·Protocol·Version·11,·Revision·0,·Release·1.3
# Build·Operating·System:·UNKNOWN·
# Current·Operating·System:·Linux·puppypc·2.6.37.4-KRG-i486-StagingDrivers-2·#4·SMP·Thu·Mar·17·06:05:58·GMT-8·2011·i686
# Build·Date:·28·November·2007
# $LANG=de_DE@euro
# today=So·30.·Okt·12:48:47·GMT+1·2011
#
#
#
#
#
########################################################################

#############################
#
#  GUI to configure JWM keyboard
#  shortcuts
#
#  For use with the jwmConfigMgr
#
#  Author: thoughtjourney
#  Date: 13/08/2005
#
#
#############################

##-------variables----------->>
PRO="/keyboard"
SCRIPT_DIR="/usr/local/jwmconfig3"
. $SCRIPT_DIR/path
KEY=
PATH1=$PATH


##--------key list----------->>

# awk '/key/ {print $2 "_" $3}' $HOME_DIR/jwmrc-personal | awk -F\> '/key/ {print $1 " " $2}' | awk -F\< '/key/ {print $1}' > $SCRIPT_DIR/cuts
# awk '/key/ {print $2 "_" $3}' $PersonalFile | awk -F\> '/key/ {print $1 " " $2}' | awk -F\< '/key/ {print $1}' > $KeyL
. $SCRIPT_DIR/func -listSC
sl="`echo '1 / 5' | bc -l`"
##---------GUI--------------->>

export Keyboard_Shortcuts="
<window title=\"JWM Configuration Manager\" icon-name=\"gtk-preferences\">
<vbox>
  <frame Description>
    <hbox>
   <pixmap><input file>$MINI_ICONS_DIR/mini-keyboard.xpm</input></pixmap>
      <text>
        <label>You can configure your keyboard shortcuts here.</label>
      </text>
    </hbox>
  </frame>

  <frame Current Shortcuts>
    <hbox>
      <text><label>You can delete or change a shortcut by selecting it below.</label></text>
    </hbox>
    <hbox>
       <text><label>Note that changes will appear next time you hit the refresh button.</label></text>
    </hbox>
    <table>
      <label>KeyCombo                | Action</label>
      <width>500</width><height>180</height>
      <variable>KEY</variable>
      <input>more $KeyL</input>
      <action>$SCRIPT_DIR/changeKey &</action>
       <action>"$SCRIPT_DIR/'func -listSC'" &</action>
       <action>sleep $sl</action>
       <action type=\"clear\">KEY</action>
       <action>refresh:KEY</action>

    </table>
    <hbox>
     <button><input file stock=\"gtk-refresh\"></input><label>REFRESH</label>
      <action>"$SCRIPT_DIR/'func -listSC'" &</action>
        <action>sleep $sl</action>
        <action type=\"clear\">KEY</action>
       <action>Refresh:KEY</action>
     </button>
    </hbox>
  </frame>
  <frame Add Shortcut>
    <hbox><text><label>Add a new shortcut by filling in the boxes below. Click the button to add your shortcut.</label></text></hbox>
    <hbox>
     <entry>
      <default>mask (optional)</default>
      <visible>enabled</visible>
      <variable>ADDMASK</variable>
     </entry>
     <entry>
      <default>key</default>
      <visible>enabled</visible>
      <variable>ADDKEY</variable>
     </entry>
     <entry>
      <default>action</default>
      <visible>enabled</visible>
      <variable>ADDACTION</variable>
     </entry>
     <button>
      <label>Add</label>
      <input file>$MINI_ICONS_DIR/mini-keyboard.xpm</input>
      <action>$SCRIPT_DIR/addShortcut &</action>
     </button>
    </hbox>
  </frame>
  <frame Quick Info>
    <pixmap><input file>$MINI_ICONS_DIR/info16.xpm</input></pixmap>
    <edit>
      <input file>$SCRIPT_DIR/keyConfigHelp</input>
      <width>600</width><height>140</height>
    </edit>
  </frame>
  <hbox>

    <button>
    <input file>$MINI_ICONS_DIR/geany.xpm</input>
        <label>Edit File</label>
        <action>defaulttexteditor "$PersonalFile" &</action>
    </button>
    <button ok>
      <action>rm -f $KeyL</action>
      <action type=\"exit\">OK</action>
    </button>
    <button help>
      <action>defaulthtmlviewer http://www.joewing.net/programs/jwm/config.shtml#keys &</action>
    </button>
    <button>
    <label>Exit</label>
    <input file stock=\"gtk-quit\"></input>
    <action>EXIT:ok</action>
    </button>
  </hbox>
</vbox>
</window>
"

#------------run------------>>

export PATH="$PATH:."
gtkdialog3 --program Keyboard_Shortcuts

#----------cleanup--------->>

rm -f $KeyL
unset Keyboard_Shortcuts
export PATH="$PATH1"

exit 0
