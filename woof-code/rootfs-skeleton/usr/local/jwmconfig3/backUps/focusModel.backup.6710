#!/bin/bash

##----focus model configuration for JWM---->>

#--------variables---------->>
PRO="/focusModel"
SCRIPT_DIR="/usr/local/jwmconfig3"
. $SCRIPT_DIR/path

PF=1
SET_CLICK=`grep -c "$CLICK" $PersonalFile`

if [ $SET_CLICK -eq 1 ]; then
    CLICK_ON=ON
    SLOPPY_ON=off
else
    CLICK_ON=off
    SLOPPY_ON=ON
    VALUE="sloppy"
fi

#----------dialogue-------->>

#!/bin/sh

Xdialog --title "Focus Model" \
        --radiolist "Choose between the sloppy and click focus models:\n\n\
First, a little note on what these focus models are:\n\n\
SLOPPY FOCUS\n\
The window that is under the mouse pointer is the\n\
window that has the focus. The focus is changed\n\
by pointing at another window, there is no need\n\
to click in it as well.\n\n\
CLICK TO FOCUS\n\
The model used by Microsoft Windows.\n\
The active window is selected by mouse click.\n\n" 0 0 2 \
"click"  "click-to-focus" $CLICK_ON \
"sloppy" "sloppy focus" $SLOPPY_ON 2> $TmpIB

retval=$?

#--------clean exit------->>
. $SCRIPT_DIR/func -simpleexit

#--------preparation------>>

CHOICE=`cat $TmpIB`
rm -f $TmpIB

if [ -z $CHOICE ]; then
   CHOICE="click"
fi
	
SEDFOCUS=s!Model\>${VALUE}!Model\>${CHOICE}!g

#---------save changes----->>
sed -e "$SEDFOCUS" $PersonalFile > $PersonalFileTmp

mv $PersonalFileTmp $PersonalFile

#----notify of result----->>

RES=`grep -c ">$CHOICE" $PersonalFile`
PATTERN=" Focus model"

if [ $RES -eq 1 ]; then
. $SCRIPT_DIR/func -notify
fi

exit 0

