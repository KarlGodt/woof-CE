#!/bin/bash

#exec geany "$*"


#line=`echo "$*" | sed 's/:/\\\:/g'`
#line=`echo "$*" | sed 's/:/\\\\\\\:/g'`
#line=`echo "$*" | sed 's/:/\\\\\\:/'`
#echo "$line"
#geany "$line"
echo "$0:'$*'"

FN="$@"
if [ -f "$FN" ] ; then
 echo "$FN" is a regular file.

 if [ "${FN%/*}" != /tmp ];then
 echo "$FN" is not in /tmp .
 BN="${FN##*/}"
 /bin/cp --backup=numbered "$FN" "/tmp/$BN"
 cd /tmp/
    if [ "`echo "$BN" | grep '\:'`" ] ; then
    OLDBN="$BN"
    BN="${BN//:/_}"
    /bin/cp --backup=numbered "$OLDBN" "${BN}"
    fi
 geany "$BN" &
 sleep 1
 geany "$*"
 geany $*
 geany $@
 geany "$@"

 else #tmp
 echo else 2
 #geany "$FN"
 geany "$*"
 fi
else
echo else 1
# REM: No double qoutes, since geany interprets "" as filename 'root'
#geany "$*"
#geany "$@"
geany $*
fi
