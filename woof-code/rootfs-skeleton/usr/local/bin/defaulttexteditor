#!/bin/sh

#exec geany "$*"


#line=`echo "$*" | sed 's/:/\\\:/g'`
#line=`echo "$*" | sed 's/:/\\\\\\\:/g'`
#line=`echo "$*" | sed 's/:/\\\\\\:/'`
#echo "$line"
#geany "$line"

FN="$*"
if [ -f "$FN" ] ; then
 echo "$FN" is a regular file.
 if [ "${FN%/*}" != /tmp ];then
 echo "$FN" is not in /tmp .
 BN="${FN##*/}"
 cp --backup=numbered "$FN" "/tmp/$BN"
 cd /tmp/
    if [ "`echo "$BN" | grep '\:'`" ] ; then
    OLDBN="$BN"
    BN="${BN//:/_}"
    cp --backup=numbered "$OLDBN" "${BN}"
    fi
 geany "$BN" &
 sleep 1
 geany $*
 else
 geany "$FN"
 fi
else
#geany "$*"
#geany "$@"
geany $*
fi
