#!/bin/ash
test "$DEFAULT" || DEFAULT=geany
test "$OPTIONS" || OPTIONS=
editorOPTIONS=

while test "$#"
do
case $1 in
-*|--*) editorOPTIONS="$editorOPTIONS $1";shift;;
*) break;;
esac
done

if test -f "$*"; then
REAL=`realpath "$@"`
 case `ls -l "$REAL"` in
 -[r-]w*)
 which $DEFAULT || { echo "$DEFAULT not installed in PATH ."; exit 1; }
 exec $DEFAULT $OPTIONS $editorOPTIONS "$@" &
 ;;
 *)
 DEFAULT=defaulttextviewer
 OPTIONS=
 which $DEFAULT || { echo "$DEFAULT not installed in PATH ."; exit 1; }
 exec $DEFAULT $OPTIONS "$@" &
 ;;
esac
else
 which $DEFAULT || { echo "$DEFAULT not installed in PATH ."; exit 1; }
 exec $DEFAULT $OPTIONS $editorOPTIONS "$@" &
fi
