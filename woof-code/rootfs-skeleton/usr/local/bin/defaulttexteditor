#!/bin/ash

__say__colons_feature__(){
cat >&2 <<EoI
none    [files ...]
Open all given files at startup. This option causes Geany to ignore loading stored files from the last session (if enabled).
Geany also recognizes line and column information when appended to the filename with colons,
e.g. "geany foo.bar:10:5" will open the file foo.bar and place the cursor in line 10 at column 5.

Projects can also be opened but a project file (*.geany) must be the first non-option argument. All additionally given files are ignored.

You can also pass line number and column number information, e.g.:
geany some_file.foo:55:4

Geany supports all generic GTK options, a list is available on the help screen.
EoI
}

#exec geany "$*"


#line=`echo "$*" | sed 's/:/\\\:/g'`
#line=`echo "$*" | sed 's/:/\\\\\\\:/g'`
#line=`echo "$*" | sed 's/:/\\\\\\:/'`
#echo "$line"
#geany "$line"
echo "$0:'$*'"

FN="$@"
if [ -f "$FN" ] ; then
 echo "$FN" is a regular file.

 if [ "${FN%/*}" != /tmp ];then
 echo "$FN" is not in /tmp .
 BN="${FN##*/}"
 /bin/cp --backup=numbered "$FN" "/tmp/$BN"
 cd /tmp/
    case $BN in *':'*)
    OLDBN="$BN"
    BN="${BN//:/_}"
    /bin/cp --backup=numbered "$OLDBN" "${BN}"
    ;; esac
 geany "$BN" &
 sleep 1
 #all four work:
 geany "$*":0:0
 #geany $*:0:0
 #geany $@:0:0
 #geany "$@":0:0

 else #tmp
 echo else 2
 #geany "$FN"
 geany "$*":0:0
 fi
else
echo else 1
# REM: No double qoutes, since geany interprets "" as filename 'root'
#geany "$*"
#geany "$@"
geany $*
fi
