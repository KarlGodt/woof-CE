#!/bin/ash
#
# New header by Karl Reimer Godt, September 2014
  _TITLE_="Puppy_gtkmoz"
_VERSION_=1.0omega
_COMMENT_="$_TITLE_:Puppy Linux shell script [to TODO here]"

MY_SELF="/usr/local/bin/gtkmoz"
MY_PID=$$

test -f /etc/rc.d/f4puppy5 && {
[ "$HAVE_F4PUPPY5" ] || . /etc/rc.d/f4puppy5

ADD_PARAMETER_LIST=""
ADD_PARAMETERS=""
_provide_basic_parameters

TWO_HELP=''; TWO_VERSION=''; TWO_VERBOSE=''; TWO_DEBUG=''; ## Set to anything if code requires further down (ie. custom usage or version message)
ADD_HELP_MSG="$_COMMENT_"
_parse_basic_parameters "$@"
[ "$DO_SHIFT" ] && [ ! "${DO_SHIFT//[[:digit:]]/}" ] && {
  for oneSHIFT in `seq 1 1 $DO_SHIFT`; do shift; done; }

_trap

}
# End new header
#
#BK June 2009


__deprecated_header__(){
#************
#KRG
OUT=/dev/null;ERR=$OUT
[ "$DEBUG" ] && { OUT=/dev/stdout;ERR=/dev/stderr; }
[ "$DEBUG" = 2 ] && set -x

Version=1.1-KRG-MacPup_O2

usage(){
MSG="
$0 [ help | version ]
"
echo "$MSG
$2"
exit $1
}
[ "`echo "$1" | grep -Ei "help|\-h"`" ] && usage 0
[ "`echo "$1" | grep -Ei "version|\-V"`" ] && { echo "$0: $Version";exit 0; }

trap "exit" HUP INT QUIT ABRT KILL TERM

#KRG
#************
}
INFO=1



export MOZ_DISABLE_PANGO=1

#grab these from SeaMonkey...
[ ! -f /root/.PuppyBrowser/default/cert8.db ] && /usr/local/PuppyBrowser/find_certs &

cd /usr/local/PuppyBrowser

if [ ! "$*" ];then
 #exec ./PuppyBrowser "file:///usr/share/doc/index.html" -title="Puppy HTML Viewer" -w=796 -h=580
  exec ./puppy-browser "file:///usr/share/doc/index.html" -title="Puppy HTML Viewer" -w=796 -h=580
fi

if [ "$#" -ge 2 ];then
  #exec ./PuppyBrowser $@
  _info 'Have $2:'"$PWD:${@}"
  exec ./puppy-browser "${@}"
else
  #exec ./PuppyBrowser "${1}" -title="Puppy HTML Viewer" -w=796 -h=580
  _info "$PWD:${@}" -title="Puppy HTML Viewer" -w=796 -h=580

  if test -f ./"${@}"; then
   ABSPATH=`realpath ./"${@}"`
   if test -f "$ABSPATH"; then
    set - "file://$ABSPATH"
   fi

  elif test -f "${@}"; then
   set - "file://${@}"

  else
    ABSPATH=`realpath "$@"` >>$ERR
    if test -f "$ABSPATH"; then
     set - "file://$ABSPATH"
    else
     _notice "'$@' seems not to be a filename"
    fi
  fi

  _info "$PWD:${@}" -title="Puppy HTML Viewer" -w=796 -h=580
  exec ./puppy-browser "${@}" -title="Puppy HTML Viewer" -w=796 -h=580
fi
