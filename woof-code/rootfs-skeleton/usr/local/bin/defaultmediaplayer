#!/bin/sh

MEDIA_PLAYER=`which gxine`

while [ $# != 0 ]
do
test -f "$@" && break
playerOPTIONS="$playerOPTIONS $1"
shift
done

if test -f "$@"; then
case "$@" in
*.mp4) :;;
*.flv|*.swf) :;;
*.mp3) :;;
*) FILETYPE=`file "$@"`
   case "$FILETYPE" in
   *flash*|*Flash*|*FLASH*|*MP4*|*Mp4*|*mp4*|*MPEG*v4*) MEDIA_PLAYER=`which gnome-mplayer`;;
   esac;;
esac
fi

which "$MEDIA_PLAYER" || exit
echo "'$MEDIA_PLAYER' '$playerOPTIONS' '$@'" >&2
exec "$MEDIA_PLAYER" $playerOPTIONS "$@"
