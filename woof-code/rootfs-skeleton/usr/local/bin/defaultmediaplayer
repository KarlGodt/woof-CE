#!/bin/sh
#
# New header by Karl Reimer Godt, September 2014
  _TITLE_="Puppy_defaultmediaplayer"
_VERSION_=1.0omega
_COMMENT_="$_TITLE_:Puppy Linux shell script [to TODO here]"

MY_SELF="/usr/local/bin/defaultmediaplayer"
MY_PID=$$

test -f /etc/rc.d/f4puppy5 && {
source /etc/rc.d/f4puppy5

ADD_PARAMETER_LIST=""
ADD_PARAMETERS=""
_provide_basic_parameters

ADD_HELP_MSG="$_COMMENT_"
_parse_basic_parameters "$@"
[ "$DO_SHIFT" ] && [ ! "${DO_SHIFT//[[:digit:]]/}" ] && {
  for oneSHIFT in 1; do shift; done; }

_trap

}
# End new header
#

MEDIA_PLAYER=`which gxine`

while [ $# != 0 ]
do
test -f "$1" && FILE="$1"
playerOPTIONS="$playerOPTIONS $1"
shift
done

if test -f "$FILE"; then
case "$FILE" in
*.mp4) MEDIA_PLAYER=`which gnome-mplayer`;;
*.flv|*.swf) MEDIA_PLAYER=`which gnome-mplayer`;;
*.mp3) :;;
*) FILETYPE=`file "$@"`
   case "$FILETYPE" in
   *flash*|*Flash*|*FLASH*|*MP4*|*Mp4*|*mp4*|*MPEG*v4*) MEDIA_PLAYER=`which gnome-mplayer`;;
   esac;;
esac
fi

which "$MEDIA_PLAYER" || exit 1
echo "'$MEDIA_PLAYER' '$playerOPTIONS' '$@'" >&2
exec "$MEDIA_PLAYER" $playerOPTIONS "$@"
# Very End of this file 'usr/local/bin/defaultmediaplayer' #
###END###
