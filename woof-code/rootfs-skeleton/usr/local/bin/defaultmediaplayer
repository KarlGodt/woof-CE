#!/bin/sh

exec 1>>/tmp/${0##*/}.log 2>>/tmp/${0##*/}.log
echo

PLAYER_LIST='gxineshell gxine gnome-mplayer gmplayer mplayer vlc'

for onePLAYER in $PLAYER_LIST; do
which $onePLAYER || continue
upperPLAYER=`echo "$onePLAYER" | tr '[[:lower:]]' '[[:upper:]]' | tr '[[:punct:]]' '_'`
test "$upperPLAYER" = "$onePLAYER" && continue
eval `echo "${upperPLAYER}=$onePLAYER"`
done

echo $GXINESHELL $GXINE $GNOME_MPLAYER $GMPLAYER $MPLAYER $VLC

test "$GNOME_MPLAYER" -a "$MPLAYER" && MPLAYER="$GNOME_MPLAYER"


if test -f "$@"; then

hasEXT="${@##*.}"
echo "hasEXT='$hasEXT'"

case $hasEXT in
flv|swf) exec $MPLAYER "$@";;
mp4)     exec $MPLAYER "$@";;
mp3);;
*|'') fileFORM=`file "$@"` || exit 1
    case $fileFORM in
    *flash*|*Flash*|*FLASH*|*MPEG*v4*) exec $MPLAYER "$@" & exit ;;
    *)
    esac;;
*);;
esac

fi

exec gxine "$@" &
