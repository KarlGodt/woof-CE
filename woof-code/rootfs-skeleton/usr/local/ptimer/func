#!/bin/bash
#
# New header by Karl Reimer Godt, September 2014
  _TITLE_="Puppy_func"
_VERSION_=1.0omega
_COMMENT_="$_TITLE_:Puppy Linux shell script [to TODO here]"

MY_SELF="/usr/local/ptimer/func"
MY_PID=$$

test -f /etc/rc.d/f4puppy5 && {
source /etc/rc.d/f4puppy5

ADD_PARAMETER_LIST=""
ADD_PARAMETERS=""
_provide_basic_parameters

ADD_HELP_MSG="$_COMMENT_"
_parse_basic_parameters "$@"
[ "$DO_SHIFT" ] && [ ! "${DO_SHIFT//[[:digit:]]/}" ] && {
  for oneSHIFT in 1; do shift; done; }

_trap

}
# End new header
#
echo -e "pstopwatch \c" > /tmp/ptimer-exec
case $1 in
-stopwatch)
	if [ "$AUTOSTART" = "true" ]; then echo -e "-x \c" >> /tmp/ptimer-exec; fi
	if [ "$TENTH" = "false" ]; then echo -e "-s \c" >> /tmp/ptimer-exec; fi
	if [ "$COUNTDOWN" = "false" ]; then echo -e "-c \c" >> /tmp/ptimer-exec; fi
	if [ "$TIMER" = "true" ]; then echo -e "-t $ENTRY_TIMER \c" >> /tmp/ptimer-exec; fi
	;;
-clock)
	echo -e "-C \c" >> /tmp/ptimer-exec
	if [ "$CLOCK_ALARM" = "true" ]; then
		echo -e "-A $ENTRY_ALARM -l ::\"Alarm at ${ENTRY_ALARM/:/.}\" \c" >> /tmp/ptimer-exec
	else
		echo -e "-l \"::Clock\" \c" >> /tmp/ptimer-exec
	fi
	;;
esac
if [ "$CHECK_WINDOWSIZE" ]; then echo "-w $ENTRY_WINDOWSIZE \c" >> /tmp/ptimer-exec; fi
if [ "$CHECK_FONT" ]; then echo "-f \"$ENTRY_FONT\":$ENTRY_FONTSIZE \c" >> /tmp/ptimer-exec; fi
if [ "$CHECK_SOUND" ]; then echo "-a \"$SOUND_ALARM\" -b \"$SOUND_BEEP_LOW\" -B \"$SOUND_BEEP_HIGH\" \c" >> /tmp/ptimer-exec; fi
	
chmod 700 /tmp/ptimer-exec
/tmp/ptimer-exec &
