#!/bin/bash
#jwmthememaker
#Copyright 2009 GPL
#Trio Tjandradjaja

ls -1 $HOME/.jwm/themes  | grep jwmrc | sed -e 's/-jwmrc//' | awk '{print "<item>"$1"</item>"}' > /tmp/jwmthemelist.txt
THEMES=`cat /tmp/jwmthemelist.txt`

WIDGET_DIR="`dirname $0`"
[ "$WIDGET_DIR" = "." ] && WIDGET_DIR="`pwd`"
export WIDGET_DIR="$WIDGET_DIR"

export deltheme="	
<window title=\"Delete a theme\">
  <frame    Warning: Permanently delete   >
  <vbox> 
   <text><label>chosen theme</label></text>
   <combobox>
   <variable>THEME</variable>
   $THEMES
   </combobox>
   </vbox>
   <hbox>
   <button>
    <input file icon=\"gtk-quit\"></input>
    <label>Quit</label>
   </button>
   <button>
    <input file icon=\"gtk-delete\"></input>
    <label>Delete a theme</label>
    <action>rm $HOME/.jwm/themes/\"\$THEME\"-* &</action>
    <action>exit: deltheme</action>
   </button>
   </hbox>	
  </frame>
</window>"

#execute gtkdialog
gtkdialog3 --center --program=deltheme

unset deltheme

#clear
exit 0
