#!/bin/bash
#
# New header by Karl Reimer Godt, September 2014
  _TITLE_="Puppy_deltheme"
_VERSION_=1.0omega
_COMMENT_="$_TITLE_:Puppy Linux shell script [to TODO here]"

MY_SELF="/usr/local/jwmthememaker/deltheme"
MY_PID=$$

test -f /etc/rc.d/f4puppy5 && {
source /etc/rc.d/f4puppy5

ADD_PARAMETER_LIST=""
ADD_PARAMETERS=""
_provide_basic_parameters

ADD_HELP_MSG="$_COMMENT_"
_parse_basic_parameters "$@"
[ "$DO_SHIFT" ] && [ ! "${DO_SHIFT//[[:digit:]]/}" ] && {
  for oneSHIFT in `seq 1 1 $DO_SHIFT`; do shift; done; }

_trap

}
# End new header
#
#jwmthememaker
#Copyright 2009 GPL
#Trio Tjandradjaja

ls -1 $HOME/.jwm/themes  | grep jwmrc | sed -e 's/-jwmrc//' | awk '{print "<item>"$1"</item>"}' > /tmp/jwmthemelist.txt
THEMES=`cat /tmp/jwmthemelist.txt`

WIDGET_DIR="`dirname $0`"
[ "$WIDGET_DIR" = "." ] && WIDGET_DIR="`pwd`"
export WIDGET_DIR="$WIDGET_DIR"

export deltheme="	
<window title=\"Delete a theme\">
  <frame    Warning: Permanently delete   >
  <vbox> 
   <text><label>chosen theme</label></text>
   <combobox>
   <variable>THEME</variable>
   $THEMES
   </combobox>
   </vbox>
   <hbox>
   <button>
    <input file icon=\"gtk-quit\"></input>
    <label>Quit</label>
   </button>
   <button>
    <input file icon=\"gtk-delete\"></input>
    <label>Delete a theme</label>
    <action>rm $HOME/.jwm/themes/\"\$THEME\"-* &</action>
    <action>exit: deltheme</action>
   </button>
   </hbox>	
  </frame>
</window>"

#execute gtkdialog
gtkdialog3 --center --program=deltheme

unset deltheme

#clear
exit 0
