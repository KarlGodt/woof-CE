#!/bin/bash
#
# New header by Karl Reimer Godt, September 2014
  _TITLE_="Puppy_jwmthememaker"
_VERSION_=1.0omega
_COMMENT_="$_TITLE_:Puppy Linux shell script [to TODO here]"

MY_SELF="/usr/local/jwmthememaker/jwmthememaker"
MY_PID=$$

test -f /etc/rc.d/f4puppy5 && {
source /etc/rc.d/f4puppy5

ADD_PARAMETER_LIST=""
ADD_PARAMETERS=""
_provide_basic_parameters

TWO_HELP=''; TWO_VERSION=''; TWO_VERBOSE=''; TWO_DEBUG=''; ## Set to anything if code requires further down (ie. custom usage or version message)
ADD_HELP_MSG="$_COMMENT_"
_parse_basic_parameters "$@"
[ "$DO_SHIFT" ] && [ ! "${DO_SHIFT//[[:digit:]]/}" ] && {
  for oneSHIFT in `seq 1 1 $DO_SHIFT`; do shift; done; }

_trap

}
# End new header
#
#jwmthememaker
#Copyright 2009 GPL
#Trio Tjandradjaja

echo 'Please choose a color' > /tmp/color.tmp

echo "`fc-list | cut -d ":" -f 1 | sort | uniq`" > /tmp/fontlist.txt
cat /tmp/fontlist.txt  | awk '{print "<item>"$1" "$2" "$3" "$4"</item>"}' > /tmp/fontlist.txt
FONTS=`cat /tmp/fontlist.txt`

WIDGET_DIR="`dirname $0`"
[ "$WIDGET_DIR" = "." ] && WIDGET_DIR="`pwd`"
export WIDGET_DIR="$WIDGET_DIR"

export jwmtheme="	
<window title=\"JWM Theme Maker 1.4\">
 <vbox>
  <frame Make your own JWM theme> 
	<vbox>	
	<pixmap><input file>/usr/local/lib/X11/pixmaps/paint48.png</input></pixmap>
   <frame Window - Taskbar - Menu>
   <hbox>
   <text><label>Active    - fr</label></text>
   <entry tooltip-text=\"Opened window color gradient start\">
   <input>cat /tmp/color.tmp</input>
     <variable>COLOR1</variable>
    </entry>
    <button>
     <input file>/usr/local/lib/X11/mini-icons/colorexplorer.xpm</input>
     <action>Xdialog --stdout --colorsel 'Please choose a color' 22 75 [0 0 0] > /tmp/color.tmp</action>
     <action>. $WIDGET_DIR/func -rgb2hex</action>
     <action type=\"refresh\">COLOR1</action>
    </button>
    <text><label>to</label></text>
   <entry tooltip-text=\"Opened window color gradient end\">
   <input>cat /tmp/color.tmp</input>
     <variable>COLOR2</variable>
    </entry>
    <button>
     <input file>/usr/local/lib/X11/mini-icons/colorexplorer.xpm</input>
     <action>Xdialog --stdout --colorsel 'Please choose a color' 22 75 [0 0 0] > /tmp/color.tmp</action>
     <action>. $WIDGET_DIR/func -rgb2hex</action>
     <action type=\"refresh\">COLOR2</action>
    </button>
   </hbox>
   <hbox>
   <text><label>Inactive - fr</label></text>
   <entry tooltip-text=\"Closed window color gradient start\">
   <input>cat /tmp/color.tmp</input>
     <variable>COLOR3</variable>
    </entry>
    <button>
     <input file>/usr/local/lib/X11/mini-icons/colorexplorer.xpm</input>
     <action>Xdialog --stdout --colorsel 'Please choose a color' 22 75 [0 0 0] > /tmp/color.tmp</action>
     <action>. $WIDGET_DIR/func -rgb2hex</action>
     <action type=\"refresh\">COLOR3</action>
    </button>
    <text><label>to</label></text>
   <entry tooltip-text=\"Closed window color gradient end\">
   <input>cat /tmp/color.tmp</input>
     <variable>COLOR4</variable>
    </entry>
    <button>
     <input file>/usr/local/lib/X11/mini-icons/colorexplorer.xpm</input>
     <action>Xdialog --stdout --colorsel 'Please choose a color' 22 75 [0 0 0] > /tmp/color.tmp</action>
     <action>. $WIDGET_DIR/func -rgb2hex</action>
     <action type=\"refresh\">COLOR4</action>
    </button>
   </hbox>
   <hbox>
   <text><label>Active text</label></text>
   <entry tooltip-text=\"Text for opened windows & cursor passed menu entry\">
   <input>cat /tmp/color.tmp</input>
     <variable>COLOR5</variable>
    </entry>
    <button>
     <input file>/usr/local/lib/X11/mini-icons/colorexplorer.xpm</input>
     <action>Xdialog --stdout --colorsel 'Please choose a color' 22 75 [0 0 0] > /tmp/color.tmp</action>
     <action>. $WIDGET_DIR/func -rgb2hex</action>
     <action type=\"refresh\">COLOR5</action>
    </button>
    <text><label>Inactive text</label></text>
   <entry tooltip-text=\"Text for closed windows & menu entry\">
   <input>cat /tmp/color.tmp</input>
     <variable>COLOR6</variable>
    </entry>
    <button>
     <input file>/usr/local/lib/X11/mini-icons/colorexplorer.xpm</input>
     <action>Xdialog --stdout --colorsel 'Please choose a color' 22 75 [0 0 0] > /tmp/color.tmp</action>
     <action>. $WIDGET_DIR/func -rgb2hex</action>
     <action type=\"refresh\">COLOR6</action>
    </button>
   </hbox>
   <hbox>
   <text><label>Base background</label></text>
   <entry tooltip-text=\"Background of taskbar & menu\">
   <input>cat /tmp/color.tmp</input>
     <variable>COLOR7</variable>
    </entry>
    <button>
     <input file>/usr/local/lib/X11/mini-icons/colorexplorer.xpm</input>
     <action>Xdialog --stdout --colorsel 'Please choose a color' 22 75 [0 0 0] > /tmp/color.tmp</action>
     <action>. $WIDGET_DIR/func -rgb2hex</action>
     <action type=\"refresh\">COLOR7</action>
    </button>
    <text><label>Border Outline</label></text>
   <entry tooltip-text=\"Borders of windows and pop-up\">
   <input>cat /tmp/color.tmp</input>
     <variable>COLOR10</variable>
    </entry>
    <button>
     <input file>/usr/local/lib/X11/mini-icons/colorexplorer.xpm</input>
     <action>Xdialog --stdout --colorsel 'Please choose a color' 22 75 [0 0 0] > /tmp/color.tmp</action>
     <action>. $WIDGET_DIR/func -rgb2hex</action>
     <action type=\"refresh\">COLOR10</action>
    </button>
    </hbox>
   <hbox>
   <text><label>Font Name</label></text>
   <combobox tooltip-text=\"Applied to all windows, taskbar and menu\">
   <variable>FONT</variable>
   $FONTS
   </combobox>
   <text><label>\"                           Font Size \"</label></text>
   <combobox tooltip-text=\"Applied to all windows, taskbar and menu\">
   <variable>FONTSIZE</variable>
   <item>12</item>
   <item>10</item>
   <item>11</item>
   <item>12</item>
   <item>13</item>
   <item>14</item>
   <item>15</item>
   </combobox>
   </hbox>
   </frame>
   <frame Pop-Up Box>
   <hbox>
   <text><label>Background</label></text>
   <entry tooltip-text=\"Applied only for pop-up info when cursor over pager on taskbar\">
   <input>cat /tmp/color.tmp</input>
     <variable>COLOR8</variable>
    </entry>
    <button>
     <input file>/usr/local/lib/X11/mini-icons/colorexplorer.xpm</input>
     <action>Xdialog --stdout --colorsel 'Please choose a color' 22 75 [0 0 0] > /tmp/color.tmp</action>
     <action>. $WIDGET_DIR/func -rgb2hex</action>
     <action type=\"refresh\">COLOR8</action>
    </button>
    <text><label>Text</label></text>
   <entry tooltip-text=\"Applied only for pop-up info when cursor over pager on taskbar\">
   <input>cat /tmp/color.tmp</input>
     <variable>COLOR9</variable>
    </entry>
    <button>
     <input file>/usr/local/lib/X11/mini-icons/colorexplorer.xpm</input>
     <action>Xdialog --stdout --colorsel 'Please choose a color' 22 75 [0 0 0] > /tmp/color.tmp</action>
     <action>. $WIDGET_DIR/func -rgb2hex</action>
     <action type=\"refresh\">COLOR9</action>
    </button>
   </hbox>
   </frame>
   <frame Save & Instant Apply>
   <hbox>
    <text><label>Name</label></text>
    <entry tooltip-text=\"No empty space in name, ex: Blue-Nice\"> 
     <variable>NAME</variable>
	 <input>echo 'Type in new theme name'</input>
   </entry>
   <button tooltip-text=\"Save current theme name typed in Name Box\">
    <input file icon=\"gtk-save\"></input>
    <label>Save Theme</label>
    <action>. $WIDGET_DIR/func -makefile</action>
   </button>
   <button tooltip-text=\"Instant view of current theme name typed in Name Box\">
   <input file icon=\"ppg\"></input>
   <action>. $WIDGET_DIR/func -instantapply</action>
   <label>Instant Apply</label>
   </button>
   </hbox>
   </frame> 
   </vbox>
   <hbox>
   <button>
    <input file icon=\"gtk-quit\"></input>
    <label>Quit</label>
   </button>
   <button>
    <input file>/usr/local/lib/X11/mini-icons/mini-opensshd.xpm</input>
    <label>JWM Config</label>
    <action>/usr/local/jwmconfig2/jwmConfigMgr &</action>
   </button>
   <button>
    <input file icon=\"gtk-delete\"></input>
    <label>Delete a theme</label>
    <action>. $WIDGET_DIR/deltheme &</action>
   </button>	
   </hbox>
   </frame>
 </vbox>
</window>"

#execute gtkdialog
gtkdialog3 --center --program=jwmtheme

unset jwmtheme

#clear
exit 0
