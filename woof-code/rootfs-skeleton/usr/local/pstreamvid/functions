#!/bin/sh
#
# New header by Karl Reimer Godt, September 2014
  _TITLE_="Puppy_functions"
_VERSION_=1.0omega
_COMMENT_="$_TITLE_:Puppy Linux shell script [to TODO here]"

MY_SELF="/usr/local/pstreamvid/functions"
MY_PID=$$

test -f /etc/rc.d/f4puppy5 && {
[ "$HAVE_F4PUPPY5" ] || source /etc/rc.d/f4puppy5

ADD_PARAMETER_LIST=""
ADD_PARAMETERS=""
_provide_basic_parameters

TWO_HELP=''; TWO_VERSION=''; TWO_VERBOSE=''; TWO_DEBUG=''; ## Set to anything if code requires further down (ie. custom usage or version message)
ADD_HELP_MSG="$_COMMENT_"
_parse_basic_parameters "$@"
[ "$DO_SHIFT" ] && [ ! "${DO_SHIFT//[[:digit:]]/}" ] && {
  for oneSHIFT in `seq 1 1 $DO_SHIFT`; do shift; done; }

_trap

}
# End new header
#
#pstreamvid
#Trio Tjandradjaja- GPL 2009

case "$1" in

-off)
	killall gxine &
	;;
-offmplayer)
	killall mplayer &
	;;
-apply)
   if [ ! "$CHANNEL" ]; then
   xmessage -center -bg orange -default exit "Please choose available Channel" ; exit 0
   else
   NEWCHANNEL=`cat /usr/local/pstreamvid/channels/$CHANNEL`
   Xdialog --infobox "Starting gXine..please wait\n\n\nTrio Tjandradjaja - 2009" 12 40 &
      if [ "$OFF" = "true" ] ; then
      killall gxine
      exec gxine --geometry 512x288+0+0 "$NEWCHANNEL"
      else
      killall gxine
      exec gxine -fS "$NEWCHANNEL"
      fi
   fi
      ;;
-applymplayer)
   if [ ! "$CHANNEL" ]; then
   xmessage -center -bg orange -default exit "Please choose available Channel" ; exit 0
   else
   [ ! "`which mplayer`" ] && xmessage -center -bg orange -default exit "Please Install Mplayer First" && exit 0
   NEWCHANNEL=`cat /usr/local/pstreamvid/channels/$CHANNEL`
   Xdialog --infobox "Starting Mplayer..please wait\n\n\nTrio Tjandradjaja - 2009" 12 40 &
      if [ "$OFF" = "true" ] ; then
      killall mplayer
      exec mplayer -geometry +0+0 "$NEWCHANNEL"
      else
      killall mplayer
      exec mplayer -fs "$NEWCHANNEL"
      fi
   fi
   ;;
-add_channel)
	if [ "$URL" = 'Please copy & paste URL' ]; then
		xmessage -center -bg orange -default exit "Please copy & paste new URL" ; exit
	else

		echo "$URL" > /usr/local/pstreamvid/channels/"$NAME"
		ls -1 /usr/local/pstreamvid/channels/ | awk '{print $1}' > /usr/local/pstreamvid/tmp/channels
	fi
	;;
-remove)
	if [ ! "$CHANNEL" ]; then
		xmessage -center -bg orange -default exit "Please choose Channel to be removed" ; exit
	else
		rm /usr/local/pstreamvid/channels/$CHANNEL
		ls -1 /usr/local/pstreamvid/channels/ | awk '{print $1}' > /usr/local/pstreamvid/tmp/channels
	fi
	;;

esac
# Very End of this file 'usr/local/pstreamvid/functions' #
###END###
