#!/bin/sh
#
# New header by Karl Reimer Godt, September 2014
  _TITLE_="Puppy_sfsconvert"
_VERSION_=1.0omega
_COMMENT_="$_TITLE_:Puppy Linux shell script [to TODO here]"

MY_SELF="/usr/local/sfsconvert/sfsconvert"
MY_PID=$$

test -f /etc/rc.d/f4puppy5 && {
[ "$HAVE_F4PUPPY5" ] || source /etc/rc.d/f4puppy5

ADD_PARAMETER_LIST=""
ADD_PARAMETERS=""
_provide_basic_parameters

TWO_HELP=''; TWO_VERSION=''; TWO_VERBOSE=''; TWO_DEBUG=''; ## Set to anything if code requires further down (ie. custom usage or version message)
ADD_HELP_MSG="$_COMMENT_"
_parse_basic_parameters "$@"
[ "$DO_SHIFT" ] && [ ! "${DO_SHIFT//[[:digit:]]/}" ] && {
  for oneSHIFT in `seq 1 1 $DO_SHIFT`; do shift; done; }

_trap

}
# End new header
#
#SFS Converter - 3 to 4, 4 to 3
#Trio Tjandradjaja - GPL 2009

WIDGET_DIR="`dirname $0`"
[ "$WIDGET_DIR" = "." ] && WIDGET_DIR="`pwd`"
export WIDGET_DIR="$WIDGET_DIR"

export sfsconvert="	
<window title=\"SFS Converter 1.3\">
<vbox>
<text use-markup=\"true\"><label>\"<b>Warning: the conversion directory must be in a Linux filesystem, not msdos/vfat/ntfs!!! Also free space about 3 times the size of the SFS file is required</b>\"</label></text>
<hbox>
<text><label>Conversion Directory</label></text>
   <entry accept=\"directory\">
   <input>echo /mnt/home</input>
   <variable>DIR</variable>
   </entry>
   <button>
     <input file icon=\"gtk-open\"></input>
     <action type=\"fileselect\">DIR</action>
     <action type=\"refresh\">DIR</action>
     <action type=\"refresh\">TEXT</action>
    </button>
</hbox>
<frame                Drag & Drop your sfs file and click convert â†“           >
<hbox>
<text><label>SFS</label></text>
   <entry accept=\"directory\">
   <input>echo ''</input>
   <variable>SFS</variable>
   </entry>
</hbox>
</frame>
<hbox>
   <button>
    <input file icon=\"gtk-quit\"></input>
    <label>Quit</label>
   </button>
   <button tooltip-text=\"Notes about SFS files in Puppy 4.3x\">
    <input file icon=\"gtk-help\"></input>
    <action>. $WIDGET_DIR/func -help</action>
    <label>Help</label>
   </button>
   <button tooltip-text=\"Check sfs version plus other info\">
    <input file icon=\"gtk-info\"></input>
    <action>. $WIDGET_DIR/func -version</action>
    <label>Version Check</label>
   </button>
   <button tooltip-text=\"Auto detect sfs v3 and converts to v4, vice versa, make sure you have enough space (more than 3 x the sfs size in the directory), the new sfs will be created in the directory  \">
    <input file icon=\"gtk-refresh\"></input>
    <action>. $WIDGET_DIR/func -convert</action>
    <action>refresh: SFS</action>
    <label>Convert</label>
   </button>
</hbox>
</vbox>
</window>"

#execute gtkdialog
gtkdialog3 --center --program=sfsconvert

unset sfsconvert

#clear
exit 0