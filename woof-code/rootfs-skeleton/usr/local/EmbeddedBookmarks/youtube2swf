#!/bin/bash
#
# New header by Karl Reimer Godt, September 2014
  _TITLE_="Puppy_youtube2swf"
_VERSION_=1.0omega
_COMMENT_="$_TITLE_:Puppy Linux shell script [to TODO here]"

MY_SELF="/usr/local/EmbeddedBookmarks/youtube2swf"
MY_PID=$$

test -f /etc/rc.d/f4puppy5 && {
source /etc/rc.d/f4puppy5

ADD_PARAMETER_LIST=""
ADD_PARAMETERS=""
_provide_basic_parameters

ADD_HELP_MSG="$_COMMENT_"
_parse_basic_parameters "$@"
[ "$DO_SHIFT" ] && [ ! "${DO_SHIFT//[[:digit:]]/}" ] && {
  for oneSHIFT in `seq 1 1 $DO_SHIFT`; do shift; done; }

_trap

}
# End new header
#


# wget -c -O /tmp/youtube.tmp http://www.youtube.com/user/deutschewelle

rm -f /tmp/youtube.tmp 2>/dev/null
sync

if [ "$1" != "" ];then
	wget -c -O /tmp/youtube.tmp "$1" 1>/dev/null 2>/dev/null
fi
sync

a=`grep 'swfUrl' /tmp/youtube.tmp | sed -e "s#'##g" -e "s# :.*##" -e "s#.*'##" -e "s#.*?##" -e "s#\s*##g" -e "s#\"##g"  2>/dev/null`


b=`grep 'swfArgs' /tmp/youtube.tmp | sed -e "s#}.*##" -e "s/.*{//" -e "s#\"##g" -e "s#, #\&#g" -e "s#: #=#g" 2>/dev/null`

#echo ------------
#echo $a
#echo ------------
#echo $b

echo -n ${a}?${b}


rm -f /tmp/youtube.tmp 2>/dev/null
sync
