#!/bin/ash

case $1 in

-restart)
 . /etc/rc.d/f4puppy5
 _pidof $Q glipper  >>$OUT && { HAVE_GLIPPER=Y;  killall glipper; }
 _pidof $Q fbxkb    >>$OUT && { HAVE_FBXKB=Y;    killall fbxkb; }
 _pidof $Q retrovol >>$OUT && { HAVE_RETROVOL=Y; killall retrovol; }
 jwm.bin -restart
  sleep 1
 if test "$HAVE_RETROVOL" = Y; then
 #TODO
 RETVOL_VERS=`retrovol --version 2>/dev/null | awk '{print $2}'`
  case $RETVOL_VERS in
  0.10)
  exec retrovol -hide &
  ;;
  *)
  exec retrovol &
  ;;
  esac
 sleep 1
fi
if test "$HAVE_FBXKB" = Y; then
 exec fbxkb &
fi
if test "$HAVE_GLIPPER" = Y; then
 exec glipper &
fi
;;

*)
exec jwm.bin "$@";;
esac
