#!/bin/ash
#####
###
####
[ "$DEBUG" ] || DEBUG=`grep -iw 'debug' /proc/cmdline`
[ "$DEBUG" ] && echo "$0 /etc/profile START"
[ -f /etc/bash_completion.d/bashrc ] && . /etc/bash_completion.d/bashrc
PATH=/bin:/sbin:\
/usr/X11/bin:\
/usr/SVC/bin:\
/usr/local/bin:/usr/local/sbin:\
/usr/bin:/usr/sbin:\
/usr/local/bin:/usr/local/sbin:\
/usr/X11R7/bin:\
/root/my-applications/bin:/root/my-applications/sbin:\
/root/my-roxapps:/var/sbin
export PATH  ###+++2012-05-24
ulimit -c 0
if [ `id -gn` = `id -un` -a `id -u` -gt 14 ]; then
 umask 002
else
 umask 022
fi
USER=`id -un`
PS1="# "
LOGNAME=$USER
HISTSIZE=1000
HISTFILE="$HOME/.history"
EDITOR=mp
INPUTRC=/etc/inputrc

#v2.16 this need arose when considering SFS files that may require special env. variables.
#this code is lifted straight from Vector...
# Append any additional sh scripts found in /etc/profile.d/:
#for profile_script in /etc/profile.d/*.sh ; do
for profile_script in /etc/profile.d/* ; do #w482 any files.
 [ "`echo -n "$profile_script" | grep 'txt$'`" != "" ] && continue #w482
  #if [ -x $profile_script ]; then
. $profile_script
[ "$DEBUG" ] && echo -n "`basename $profile_script` "
unset profile_script
  #fi
done
echo

#v2.16 have gone to full ls, now need this...
#auto: only creates ansi color codes if o/p to a tty, not in a script...
alias ls='ls --color=auto'
##v2.17 no color in terminal window. G2: sh (link to bash) does not read any
##config file, unless do this...
#export ENV="/root/.bashrc"
#...no, instead have exported SHELL=bash, see above.

#v1.0.5
#personal customisation file...
if [ -r /etc/profile.local ];then
. /etc/profile.local
[ "$DEBUG" ] echo "/etc/profile.local"
fi

#fake for /etc/rc.d/rc.country AND /usr/sbin/chooselocale
LANG=nds_DE
#export LANG

launchxwin_func(){
#v2.12
#xorgwizard creates this file, run once only...
if [ ! -f /tmp/bootcnt.txt ];then
 [ -f /etc/resolutionfix ] && eval `cat /etc/resolutionfix`
fi

if [ ! -f /usr/bin/X ];then
 #v2.00r1 now support a text-mode-only puppy...
 if [ -f /usr/local/bin/elinks ];then
  if [ ! -f /tmp/bootcnt.txt ];then
   touch /tmp/bootcnt.txt
   exec /usr/local/bin/elinks file:///usr/share/doc/index.html
  fi
 else
  echo
  echo "\\033[1;31mSorry, cannot start X. Link /usr/bin/X missing."
  echo -n "(suggestion: type 'xorgwizard' to run the Xorg Video Wizard)"
  echo -e "\\033[0;39m"
 fi
else
 #want to go straight into X on bootup only...
 #if [ ! -f /tmp/bootcnt.txt ];then
  #touch /tmp/bootcnt.txt
  # aplay -N /usr/share/audio/bark.au
  if [ -z "`cat /proc/cmdline | grep -i 'nox'`" ]; then
  exec xwin
 fi
fi
}

[ "$DEBUG" ] && echo "$0 /etc/profile END"
