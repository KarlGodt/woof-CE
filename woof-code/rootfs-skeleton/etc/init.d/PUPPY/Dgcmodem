#!/bin/ash
#usb modem
#Barry Kauler, LGPL 2008
#called from rc.services.
#This script sets device links as cdc_acm would.  Cdc_acm is loaded  auromatically, although its initialization script may not be executed.

[ "$*" ] || exit
[ "$1" = "start" ] || exit
#if a modem found, quit...
[ -h /dev/modem ] && exit

[ "`lsmod | grep '^dgcusbdcp '`" ] || exit
[ "`lsmod | grep '^cdc_acm '`" ]   || exit

[ -e /dev/ttyACM0 ] || ln $VERB -sf input/ttyACM0 /dev/ttyACM0  #device name for pupdial
ln $VERB -sf ttyACM0 /dev/modem

###END###
