#!/bin/ash
echo "$0:$@" >&2
#
#   /etc/init.d/pppstatus: start or stop pppstatus.
#
# If you want pppstatus started on boot time
# rename the /etc/pppstatus/no_pppstatus_on_boot file to
# /etc/ppp/pppstatus_on_boot and change 12 below to
# the tty you want pppstatus to run on.

### BEGIN INIT INFO
# Provides:          pppstatus
# Required-Start:    $syslog
# Required-Stop:     $syslog
# Default-Start:     2 3 4 5
# Default-Stop:      0 1 6
# Short-Description: console-based PPP status monitor
# Description:       PPPstatus is a console-based utility for displaying the
#                    status of a PPP link, including connection verification,
#                    connecting time, costs calculation, top speed, e-mail
#                    check, ip address, graphical statistics, TX and RX leds,
#                    interface selection, and more. It even supports xDSL
#                    with pppoe.
#
### END INIT INFO



PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin
DAEMON=/usr/bin/pppstatus
NAME=pppstatus
TTY=12

QUIET=--quiet

test -x /usr/bin/pppstatus -a -f /etc/pppstatus/pppstatus_on_boot || exit 0

case "$1" in
    start)
        echo -n "Starting up $NAME "
        start-stop-daemon --start $QUIET --pidfile /var/run/$NAME.$TTY --exec $DAEMON -- -d $TTY
        echo "."
        ;;
    stop)
        echo -n "Shutting down $NAME "
        start-stop-daemon --stop $QUIET --pidfile /var/run/$NAME.$TTY --exec $DAEMON
        echo "."
        ;;
    restart|force-reload)
        echo -n "Restarting $NAME "
        start-stop-daemon --stop $QUIET --pidfile /var/run/$NAME.$TTY --exec $DAEMON
        sleep 1
        start-stop-daemon --start $QUIET --pidfile /var/run/$NAME.$TTY --exec $DAEMON -- -d $TTY
        echo "."
        ;;
    *)
        echo "Usage: /etc/init.d/$NAME {start|stop|restart|force-reload}"
        exit 1
        ;;
esac

exit 0
