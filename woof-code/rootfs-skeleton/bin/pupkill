#!/bin/sh
#(c) Copyright Barry Kauler sept 2011 bkhome.org
#License GPL3 (/usr/share/doc/legal)
# Like kill but special code to kill /usr/bin/pupdialog dlgs.
# PID is passed to as $1.
# See /usr/sbin/shutdownconfig for example of usage.

test -f /etc/rc.d/f4puppy5 && {
source /etc/rc.d/f4puppy5

ADD_PARAMETER_LIST=""
ADD_PARAMETERS=""
_provide_basic_parameters

ADD_HELP_MSG=""
_parse_basic_parameters "$@"
[ "$DO_SHIFT" ] && [ ! "${DO_SHIFT//[[:digit:]]/}" ] && {
    for i in `seq 1 1 $DO_SHIFT`; do shift; done; }
_trap
}

[ ! $1 ] && exit

ALLPS="`ps`"

pdPID="`echo "$ALLPS" | grep "PUP${1}DLG" | cut -f 1 -d ' ' | tr '\n' ' '`" #get PID of pupdialog window.
if [ "$pdPID" ];then
 kill $pdPID 2>/dev/null
 sleep 0.2
fi

kill $1 2>/dev/null

###END###
